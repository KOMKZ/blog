# HTTP权威指南

# 第一章 HTTP概述

## 因特网的多媒体信使者

* 可靠的数据传输协议(是如何做到可靠的呢?)

## web客户端和服务器

* web服务使用http协议,也可以说成是http服务
* client->server基于http来通信的web通信机制,基于请求和响应

## 资源

* web服务是web资源的宿主,本质来说http协议就是用来访问资源的,所以很多地方都是http是面向资源的
* 所谓的资源有很多种类型,图片,html文件,交易数据等等.

## 媒体类型

* 资源有很多的数据类型,http中使用mime类型来标记各种资源的媒体类型
* mime类型的格式形如image/jpeg, 特定分类/具体子分类
* 浏览器根据mime type来确认如何解释这种媒体类型资源
* 在响应头中表达位Content-type

## URI

* uniform resource identifier 统一资源标识符
* 用于资源的唯一标别和定位
* 目前来说有URL和URN两种表达形式

## URL

* URI的一种形式
* http://www.baidu.com/logo.jpg
* 一般格式都是 schema://服务器地址/资源路径定位path
* schema称为方案,可以理解使用那种协议来访问资源,如这里可能是http,ftp等

## URN

* uniform resource name 统一资源名
* 同URl的最主要区别是URN强调资源名称的唯一,而不需要表达在现实的位置.

## 事务

* 一条http事务= 一个请求命令+一个响应结果
* 通信通过一种叫做http message即http报文的格式化数据进行的
* http报文有请求报文和响应报文,有各自的格式

### 方法

* http协议支持多种请求命令,一般叫做请求方法
* 每个请求报文携带请求方法,来表达服务器上的一些特定的动作
* 常见的方法如GET,POST,DELETE,PUT

### 状态码

* 响应报文会携带一个状态码,来告诉客户端资源的情况或者命令的执行结果,或者是否需要采取其他的动作
* 状态码是3位数字,一般来说状态码后会有小串解释文本,如 303 Redirect

### Web页面中可以包含多个对象

* 浏览器为了展示一个页面,可能会发出多个事务来获取多个资源

##报文

* 报文结构 = 起始行 + 首部字段内容 + 主体(可选)
* 请求报文的起始行 GET /user1/logo.jpg HTTP/1.0
* 返回报文的起始行 HTTP/1.0 200 OK
* 首部字段内容格式为用: 分割开的键值对 如 Content-type: image/jpeg
* 首部字段的结束是一个空行为结束可以理解为主体和首部以空行分割开.
* 起始行和首部字段都是纯文本
* 主体对于请求报文来说是发送的数据,对于响应报文来说是返回的数据,主体可以是纯文本,如html内容,也可以是而二进制的数据

## 连接

### TCP/IP

* http是应用层协议,传输的细节叫个TCP协议来负责
* TCP协议特点:无差错的数据传输,按顺序传输,未分段数据流(任意时刻任意大小)

### 连接/IP地址及端口号

* http连接发送请求之前,需要建立TCP连接,之前还需要解析出ip和端口号,这里使用ip协议.从url上我们能够知道主机名或者ip地址,以及对应的端口号.
* 主机名可以使用dns方便的转化为ip地址

### 一个使用telnet的实例

* telnet程序能够向主机的任意tcp端口建立一个tcp连接,然后发起数据和得到响应数据
* 对此可以使用telnet向web服务的主机进行连接,然后进行http通信

## 协议版本

* http1.0是普遍使用的版本
* http1.1更加强壮8